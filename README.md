# 2-Pass-SIC-Assembler
# Assembler Project

This project implements a two-pass assembler for converting assembly language code into machine code. It reads a source file, processes it in two stages (Pass 1 and Pass 2), and generates an object program ready for execution.

---

## How It Works

### Pass 1
- Reads the source file (`source.txt`).
- Generates:
  - `intermediate.txt`: Intermediate representation of the source code.
  - `symtab.txt`: Symbol table containing labels and their addresses.
  - `optab.txt`: Opcode table with operation mnemonics and their machine code equivalents.
- Stores the generated files in the Pass2 folder for further processing.

### Pass 2
- Reads the files generated by Pass 1 (`intermediate.txt`, `symtab.txt`, and `optab.txt`).
- Produces:
  - `object_program.txt`: Contains the final machine code for the source program.

---

## Project Structure

```
assembler-project/
├── Pass1/
│   └── pass1_1.c           # Code for Pass 1
|   ├── source.txt          # Input source program
|   ├── intermediate.txt    # Intermediate representation (generated by Pass 1)
│   ├── symtab.txt          # Symbol table (generated by Pass 1)
│   └── optab.txt           # Opcode table (generated by Pass 1)
├── Pass2/
│   ├── pass2_1.c           # Code for Pass 2
│   ├── intermediate.txt  
│   ├── symtab.txt        
│   └── optab.txt
|   └── object_program.txt   # Final output: object program (generated by Pass 2)
     


```

## File Descriptions

### Input File
- **`source.txt`**: The source program written in assembly language. This file is read during Pass 1. It contains the assembly code, which includes labels, operations, and operands. The assembler will convert this assembly code into machine code through a two-pass process.

### Files Generated During Pass 1
- **`intermediate.txt`**: Contains an intermediate representation of the source code, including line numbers, instructions, and unresolved labels. This file is used in Pass 2 to resolve the addresses and generate the final object code.
  - Format:
    - Address: The memory location for the instruction.
    - Label: The label used in the assembly code.
    - Operation: The operation mnemonic (e.g., LDA, ADD).
    - Operand: The operand used with the operation (e.g., a label or value).

- **`symtab.txt`**: Symbol table containing all labels defined in the source program and their respective addresses. The symbol table helps the assembler map labels to memory locations during the two-pass process.
  - Format:
    - Label: The label name used in the source code.
    - Address: The address assigned to the label in memory.

- **`optab.txt`**: Opcode table listing mnemonics and their machine code equivalents. This table is used by the assembler to convert operation mnemonics (like LDA, ADD) into their corresponding machine code instructions.
  - Format:
    - Operation: The operation mnemonic (e.g., LDA, ADD).
    - Opcode: The corresponding machine code for the operation.

### Files Used/Generated During Pass 2
- **`intermediate.txt`**, **`symtab.txt`**, and **`optab.txt`**: These files are used as input to resolve addresses, mnemonics, and generate the final machine code.
  - **`intermediate.txt`** provides the structure of the source code with unresolved labels and memory addresses.
  - **`symtab.txt`** maps labels to memory addresses.
  - **`optab.txt`** provides the machine code equivalent for mnemonics.

- **`object_program.txt`**: The final output of the assembler containing the object program in a format ready for execution or loading into memory. This file contains the machine code for the program, including header records, text records, and end records in a format suitable for linking and loading.
  - Format:
    - Header Record (`H`): Defines the name of the program, starting address, and length.
    - Text Record (`T`): Contains the actual machine code instructions in chunks.
    - End Record (`E`): Marks the end of the object program and the entry point address.

---

## Example

### Input Source Code (`source.txt`):
```
1000                   START      1000
1000        FIRST      LDA        FIVE
1003                   ADD        LOOP
1006                   STA        RESULT
1009                   LDCH       CHARZ
100C                   STCH       RESULT
100F                   END        FIRST
1012        FIVE       WORD       5
1015        LOOP       RESW       1
1018        RESULT     RESW       1
101B        CHARZ      BYTE       C'Z'

```

## Intermediate File (`intermediate.txt`):
The `intermediate.txt` file contains an intermediate representation of the source code after the first pass. This includes the address, labels, operations, and operands. It helps track the progress of the assembly code while the assembler resolves labels and addresses.

### Example:
```
Address    Label    Operation   Operand
1000                START       1000
1000       FIRST    LDA         FIVE
1003                ADD         LOOP
1006                STA         RESULT
1009                LDCH        CHARZ
100C                STCH        RESULT
100F                END         FIRST
1012       FIVE     WORD        5
1015       LOOP     RESW        1
1018       RESULT   RESW        1
101B       CHARZ    BYTE        C'Z'

```

## Symbol Table (`symtab.txt`):
The `symtab.txt` file contains a list of all labels defined in the source program along with their memory addresses. It helps resolve labels during the second pass of the assembler, linking each label with its corresponding address.

### Example:
```
FIRST    1000
FIVE     1012
LOOP     1015
RESULT   1018
CHARZ    101B
```

## Opcode Table (`optab.txt`):
The `optab.txt` file contains a list of operation mnemonics (such as `LDA`, `ADD`, etc.) and their corresponding machine code equivalents. This table allows the assembler to translate the operation mnemonics into machine code during the second pass.

### Example:
```
LDA     0
ADD     18
STA     C
LDCH    50
STCH    54
END     0

```

## Object Program (`object_program.txt`):
The `object_program.txt` file contains the final machine code generated during the second pass. It is formatted into **header**, **text**, and **end** records, which are used to represent the program in a format ready for execution or loading into memory.

### Example:
```
H^FIRST^1000^101B
T^1000^181015C101850101B54101801000	
E^1000


```

## How to Run

### 1. Compile and Run Pass 1:
   - Navigate to the `Pass1` folder.
   - Compile the `pass1_1.c` file using your preferred C compiler.
     - For example, using GCC, you can run:
       ```bash
       gcc pass1_1.c -o pass1_1
       ```
   - Run the compiled `pass1_1` program to generate the required files:
     ```bash
     ./pass1_1
     ```
   - The following files will be generated and saved in the `Pass2` folder:
     - `intermediate.txt`: Intermediate representation of the source code.
     - `symtab.txt`: Symbol table with addresses of labels.
     - `optab.txt`: Opcode table with machine codes for mnemonics.

### 2. Compile and Run Pass 2:
   - Navigate to the `Pass2` folder.
   - Compile the `pass2_1.c` file using your preferred C compiler:
     ```bash
     gcc pass2_1.c -o pass2_1
     ```
   - Run the compiled `pass2_1` program to generate the final object program:
     ```bash
     ./pass2_1
     ```
   - The final object program will be saved in the `Pass2` folder as `object_program.txt`.

### 3. Example Workflow:
   - Start by ensuring the `source.txt` file is placed in the project directory (it contains the assembly code to be assembled).
   - Run Pass 1 (`pass1_1.c`) to generate the intermediate, symbol, and opcode tables.
   - Run Pass 2 (`pass2_1.c`) to process these files and generate the `object_program.txt`, which contains the final machine code.

---


